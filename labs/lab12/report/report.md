---
## Front matter
title: "Отчёт по лабораторной работе №12"
subtitle: "Настройки сети в Linux"
author: "Тукаев Тимур"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить навыки настройки сетевых параметров системы.

# Выполнение

## Проверка конфигурации сети

1. Получены права администратора с помощью команды `su`.  
   После ввода пароля выполнен переход в режим суперпользователя.

2. Для просмотра состояния сетевых интерфейсов и статистики переданных пакетов выполнена команда `ip -s link`.  
   Интерфейс **enp0s3** находится в состоянии **UP**, что означает его активность.  
   В отчёте видно количество переданных и полученных пакетов, а также отсутствие ошибок передачи.  

   ![Вывод информации о сетевых интерфейсах](Screenshot_1.png){ #fig:001 width=80% }

3. Для просмотра таблицы маршрутизации использована команда `ip route show`.  
   Определён маршрут по умолчанию (`default via 10.0.2.2 dev enp0s3`), через который осуществляется выход в сеть Интернет.  

4. Команда `ip addr show` отобразила сведения о назначенных адресах.  
   Интерфейс **enp0s3** имеет IPv4-адрес **10.0.2.15/24** и IPv6-адрес **fd17:625c:f037:2:a00:27ff:fe88:b0a5**.  
   Таким образом, основное сетевое подключение — **enp0s3**, IP-адрес устройства — **10.0.2.15**.

5. Проверена доступность сети Интернет с помощью `ping -c 4 8.8.8.8`.  
   Все четыре пакета успешно получены, потерь нет, что подтверждает корректную настройку соединения.  

   ![Проверка подключения к Интернету](Screenshot_2.png){ #fig:002 width=70% }

6. Добавлен дополнительный адрес **10.0.0.10/24** к интерфейсу **enp0s3** командой:  
   `ip addr add 10.0.0.10/24 dev enp0s3`.

7. Команда `ip addr show` подтвердила, что новый адрес был успешно добавлен.  

   ![Добавление дополнительного IP-адреса](Screenshot_3.png){ #fig:003 width=80% }

8. Для сравнения информации использованы команды `ip` и `ifconfig`.  
   В выводе `ifconfig` видны аналогичные данные: интерфейс **enp0s3** активен, имеет два IPv4-адреса (**10.0.2.15** и **10.0.0.10**), а также IPv6-адрес.  

9. Для вывода списка всех прослушиваемых TCP и UDP портов применена команда `ss -tul`.  
   Обнаружены открытые порты: **ssh**, **http**, **websm**, **mdns**, **tpp** — как по IPv4, так и по IPv6.  

   ![Прослушиваемые порты TCP и UDP](Screenshot_4.png){ #fig:004 width=90% }

## Управление сетевыми подключениями с помощью `nmcli`

1. От имени администратора выведен список текущих сетевых подключений командой `nmcli connection show`.  
   Отображены интерфейсы **enp0s3** (Ethernet) и **lo** (Loopback).  

   ![Просмотр текущих подключений](Screenshot_5.png){ #fig:005 width=90% }

2. Добавлено Ethernet-подключение с именем **dhcp** к интерфейсу **enp0s3**:  
   `nmcli connection add con-name "dhcp" type ethernet ifname enp0s3`.

3. Добавлено статическое соединение **static** для того же интерфейса с параметрами:  
   `ip4 10.0.0.10/24 gw4 10.0.0.1`.  
   Подключение успешно создано.

4. Повторный вызов `nmcli connection show` подтвердил наличие трёх соединений:  
   **dhcp**, **static**, **enp0s3**.

5. Активировано статическое соединение командой `nmcli connection up static`.  
   Проверка с помощью `ip addr` показала, что интерфейс **enp0s3** получил адрес **10.0.0.10/24**.  

   ![Активация статического соединения](Screenshot_6.png){ #fig:006 width=85% }

6. Далее выполнено переключение обратно на динамическое подключение:  
   `nmcli connection up dhcp`.  
   После этого интерфейс снова получил адрес **10.0.2.15** по DHCP, что подтверждено выводом `ip addr`.

   ![Переключение обратно на DHCP](Screenshot_7.png){ #fig:007 width=85% }

## Изменение параметров соединения с помощью `nmcli`

1. Для начала отключено автоматическое подключение статического соединения командой  
   `nmcli connection modify "static" connection.autoconnect no`.  
   Это позволяет вручную управлять активацией данного соединения.

2. В статическое соединение добавлен DNS-сервер **10.0.0.10**:  
   `nmcli connection modify "static" ipv4.dns 10.0.0.10`.

3. Добавлен второй DNS-сервер **8.8.8.8** с помощью оператора `+`:  
   `nmcli connection modify "static" +ipv4.dns 8.8.8.8`.  

4. Изменён IP-адрес статического соединения на **10.0.0.20/24**:  
   `nmcli connection modify "static" ipv4.addresses 10.0.0.20/24`.

5. Добавлен дополнительный IP-адрес **10.20.30.40/16**:  
   `nmcli connection modify "static" +ipv4.addresses 10.20.30.40/16`.  
   Это расширяет диапазон подключений интерфейса и позволяет использовать несколько подсетей.

6. После изменения параметров соединение **static** активировано командой  
   `nmcli connection up "static"`.  
   Проверка вывода команд `nmcli connection show` и `ip addr` подтвердила, что интерфейс **enp0s3** получил адреса **10.0.0.20/24** и **10.20.30.40/16**.  

   ![Просмотр параметров после изменения соединения](Screenshot_8.png){ #fig:008 width=90% }

7. Для проверки параметров сети в текстовом интерфейсе **nmtui** были просмотрены настройки соединений.  
   Для профиля **static** отображаются два IP-адреса (**10.0.0.20/24**, **10.20.30.40/16**), шлюз **10.0.0.1**, а также DNS-серверы **10.0.0.10** и **8.8.8.8**.  

   ![Настройки статического соединения в nmtui](Screenshot_9.png){ #fig:009 width=85% }

8. Аналогично, для соединения **dhcp** указана автоматическая конфигурация IPv4 и IPv6, а также параметр автоподключения включён.  

   ![Настройки DHCP соединения в nmtui](Screenshot_10.png){ #fig:010 width=85% }

9. В том же интерфейсе **nmtui** произведена установка имени хоста устройства — **titukaev.localdomain**.  

   ![Изменение имени хоста в nmtui](Screenshot_11.png){ #fig:011 width=70% }

10. В графическом интерфейсе ОС проверены параметры сетевых профилей.  
    При активном статическом соединении отображаются:  
    IPv4-адрес **10.20.30.40**, шлюз **10.0.0.1**, DNS-серверы **10.0.0.10**, **8.8.8.8**, а также IPv6-адрес.  

    ![Просмотр активного статического соединения в графическом интерфейсе](Screenshot_12.png){ #fig:012 width=80% }

11. После завершения проверки выполнено переключение обратно на динамическое подключение:  
    `nmcli connection up dhcp`.  
    В результате интерфейс **enp0s3** получил адрес **10.0.2.15** по DHCP и восстановил исходные параметры подключения.  

    ![Возврат к динамическому подключению](Screenshot_13.png){ #fig:013 width=80% }

# Контрольные вопросы

1. Для отображения только статуса сетевого соединения без вывода IP-адреса используется команда `nmcli device status`.  

2. Управление сетью в операционных системах семейства RHEL выполняет служба **NetworkManager**.  

3. Имя узла (hostname) хранится в файле `/etc/hostname`.  

4. Установить имя узла можно командой `hostnamectl set-hostname <имя_узла>`.  

5. Для указания разрешения имён для конкретных IP-адресов используется конфигурационный файл `/etc/hosts`.  

6. Текущую конфигурацию маршрутизации отображает команда `ip route show`.  

7. Проверить состояние службы NetworkManager можно с помощью команды `systemctl status NetworkManager`.  

8. Изменить текущий IP-адрес и шлюз по умолчанию для активного сетевого соединения позволяет команда  
   `nmcli connection modify <имя_соединения> ipv4.addresses <ip>/<маска> gw4 <шлюз>`.  

# Заключение

В ходе лабораторной работы были изучены инструменты управления сетевой конфигурацией в Linux.  
Освоены команды для просмотра интерфейсов, маршрутов и активных портов, а также работа с сетевыми профилями через `nmcli` и `nmtui`.  
Практические действия позволили закрепить навыки настройки динамических и статических подключений, добавления DNS-серверов и управления параметрами соединений в ОС типа RHEL.  
