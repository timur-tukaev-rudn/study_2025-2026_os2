---
## Front matter
title: "Отчёт по лабораторной работе №6"
subtitle: "Управление процессами"
author: "Тукаев Тимур"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить навыки управления процессами операционной системы.

# Выполнение

## Управление заданиями

1. Получены права администратора с помощью команды `su`.  
   После ввода пароля выполнен переход в контекст суперпользователя.  

   ![Получение прав администратора](Screenshot_1.png){ #fig:001 width=80% }

2. Запущены три задания: два в фоновом режиме (`sleep 3600 &`, `dd if=/dev/zero of=/dev/null &`) и одно — в активном (`sleep 7200`).  
   Последняя команда была приостановлена с помощью сочетания клавиш **Ctrl+Z**.  

3. Проверено состояние заданий с помощью команды `jobs`.  
   Первые два процесса находятся в состоянии **Running**, третье задание — **Stopped**.  

4. Возобновлено выполнение третьего задания в фоновом режиме (`bg 3`).  
   Для подтверждения изменений вновь использована команда `jobs`.  

5. Первое задание (`sleep 3600`) выведено на передний план (`fg 1`) и завершено комбинацией **Ctrl+C**.  
   Аналогичным образом завершены задания 2 и 3.  

6. В другом терминале, под обычным пользователем, запущен процесс `dd if=/dev/zero of=/dev/null &`.  
   После завершения работы терминала командой `exit`, процесс остался активным в системе.

7. Проверка выполнения фоновых процессов осуществлена с помощью команды `top`.  
   В списке процессов отображается активная команда `dd`, выполняемая пользователем.  

   ![Мониторинг процессов в top](Screenshot_2.png){ #fig:002 width=80% }

8. Для завершения процесса `dd` в режиме `top` использована клавиша **k**.  
   После остановки процесса и выхода из `top` подтверждено, что задание завершено.  

   ![Завершение процесса dd в top](Screenshot_3.png){ #fig:003 width=80% }
   
## Управление процессами

1. Получены права администратора с помощью команды `su`.  
   После перехода в контекст суперпользователя запущены три одинаковых процесса `dd`, выполняющие запись из `/dev/zero` в `/dev/null` в фоновом режиме.  

2. Проверен список активных процессов командой `ps aux | grep dd`.  
   В выводе отображаются процессы `dd`, их PID, приоритеты и состояние выполнения.  

3. Для изменения приоритета одного из процессов использована команда `renice -n 5 <PID>`.  
   Приоритет процесса успешно изменён с 0 на 5, что подтверждено системным сообщением.  

   ![Изменение приоритета процесса dd](Screenshot_4.png){ #fig:004 width=80% }

4. Для анализа иерархии запущенных процессов использована команда `ps fax | grep -B5 dd`.  
   Вывод демонстрирует дерево процессов, включая оболочку, из которой были запущены процессы `dd`.

5. После определения PID родительской оболочки, из которой были запущены процессы, выполнена команда `kill -9 <PID>`.  
   В результате оболочка завершила работу, а все дочерние процессы `dd` были автоматически остановлены.  

   ![Завершение процессов dd через родительский процесс](Screenshot_5.png){ #fig:005 width=80% }

## Задание 1. Управление приоритетами процессов

1. Получены права администратора с помощью команды `su`.  
   После перехода в контекст суперпользователя трижды запущена команда `dd if=/dev/zero of=/dev/null &` в фоновом режиме.  

   ![Запуск процессов dd в фоновом режиме](Screenshot_6.png){ #fig:006 width=80% }

2. Для одного из процессов (PID 4703) изменён приоритет с 0 на значение 5.  
   Система подтвердила изменение приоритета.

3. Повторно для того же процесса изменён приоритет на значение 15.  
   При этом процесс получил более низкий приоритет.  
   Разница заключается в том, что увеличение положительного значения nice уменьшает приоритет процесса,  
   вследствие чего он получает меньше процессорного времени.

4. Все запущенные процессы `dd` завершены командой `killall dd`.  
   Система вывела уведомления о корректном завершении всех трёх процессов.

## Задание 2. Работа с фоновыми и приоритетными процессами

1. Получены права администратора с помощью команды `su`.  
   Запущена программа `yes` в фоновом режиме с перенаправлением вывода в `/dev/null`.  
   Ещё один экземпляр программы был запущен на переднем плане, приостановлен комбинацией **Ctrl+Z**,  
   затем возобновлён и завершён.  

   ![Запуск и приостановка процессов yes](Screenshot_7.png){ #fig:007 width=80% }

2. Проверено состояние заданий с помощью команды `jobs`.  
   В списке отображаются процессы `yes` в состоянии **Running** и **Stopped**.  

3. Один из фоновых процессов был выведен на передний план и завершён.  
   Ещё один процесс с подавленным выводом переведён в фоновый режим, после чего проверено его состояние — статус изменился на **Running**.  

4. Для проверки поведения процессов при отключении терминала запущен процесс `yes` с помощью `nohup`,  
   что позволило ему продолжить выполнение после закрытия окна консоли.  
   После повторного открытия терминала подтверждено, что процесс остался активным.  

   ![Проверка выполнения процессов yes в top](Screenshot_8.png){ #fig:008 width=80% }

5. С помощью команды `top` получена информация о текущих процессах в системе.  
   Отображены два активных процесса `yes`, интенсивно использующих процессорное время.

6. Запущены три новых процесса `yes` в фоновом режиме.  
   Два из них завершены: один по PID, другой по идентификатору задания.  
   После этого отправлен сигнал **SIGHUP (1)** обычному процессу и процессу, запущенному с `nohup`.  
   Обычный процесс завершился, а процесс под `nohup` остался активным, что подтвердило корректность работы механизма защиты от зависимостей терминала.  

   ![Управление процессами yes и их завершение](Screenshot_9.png){ #fig:009 width=80% }

7. После этого вновь запущено несколько процессов `yes`, все они были одновременно завершены с помощью команды `killall yes`.  

8. Запущен процесс `yes` с обычным приоритетом и ещё один с использованием утилиты `nice`,  
   имеющий более высокий (менее приоритетный) уровень на 5 единиц.  
   Проверка с помощью `ps -l` показала различие в значениях столбца **NI** (nice value).  

9. С помощью утилиты `renice` приоритет одного из процессов изменён таким образом,  
   чтобы значения приоритетов обоих потоков стали равными.  

   ![Изменение приоритетов процессов yes](Screenshot_10.png){ #fig:010 width=80% }

# Контрольные вопросы

1. Обзор всех текущих заданий оболочки предоставляет команда `jobs`.  

2. Чтобы остановить текущее задание и продолжить его выполнение в фоновом режиме, используют сочетание клавиш **Ctrl+Z**, а затем команду `bg`.  

3. Для отмены (прерывания) текущего задания оболочки применяется комбинация клавиш **Ctrl+C**.  

4. Если доступ к оболочке недоступен, задание можно завершить с помощью команды `kill` или `killall`, указав имя процесса или его PID.  

5. Для отображения отношений между родительскими и дочерними процессами используется команда `ps fax` или `pstree`.  

6. Чтобы изменить приоритет процесса с идентификатором 1234 на более высокий, применяется команда `renice -n -5 1234`.  

7. Если запущено множество процессов `dd`, их можно быстро остановить одной командой `killall dd`.  

8. Для остановки команды с именем `mycommand` используется команда `killall mycommand`.  

9. В утилите `top` для завершения процесса используется клавиша **k**.  

10. Чтобы запустить команду с высоким приоритетом, не создавая угрозы для стабильности системы, применяют утилиту `nice` с положительным значением параметра приоритета, например `nice -n 10 команда`.  

# Заключение

В ходе лабораторной работы были изучены принципы управления заданиями и процессами в Linux.  
Освоены команды для запуска, приостановки, возобновления и завершения процессов, а также приёмы изменения их приоритетов.  
Практические упражнения позволили закрепить навыки контроля ресурсов и безопасного взаимодействия с системными задачами.  
